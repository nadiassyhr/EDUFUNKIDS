<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi Belajar - EduFunKids</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../css/learning-materials.css">
</head>
<body>
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="d-flex justify-content-center align-items-center position-fixed w-100 h-100 bg-white" style="z-index: 9999;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Header -->
    <header class="learning-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-auto">
                    <button class="btn btn-back" onclick="goBackToDashboard()">
                        <i class="bi bi-arrow-left"></i>
                    </button>
                </div>
                <div class="col">
                    <h1 id="materialTitle">Materi Belajar</h1>
                </div>
                <div class="col-auto">
                    <div class="progress-indicator">
                        <span id="currentStep">1</span>/<span id="totalSteps">7</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress">
            <div class="progress-bar" id="learningProgress" role="progressbar" style="width: 0%"></div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="learning-container">
        <!-- Material Selection -->
        <section id="materialSelection" class="material-section active">
            <div class="container">
                <h2 class="section-title">Pilih Materi yang Ingin Kamu Pelajari</h2>
                <div class="row materials-grid">
                    <!-- Materials will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Level Selection -->
        <section id="levelSelection" class="material-section">
            <div class="container">
                <h2 class="section-title" id="levelSelectionTitle">Pilih Level</h2>
                <div class="row levels-grid">
                    <!-- Levels will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Learning Content -->
        <section id="learningContent" class="material-section">
            <div class="container">
                <div class="learning-card" id="stepContent">
                    <!-- Learning steps will be loaded here -->
                </div>
                
                <!-- Navigation Buttons -->
                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()" disabled>
                        <i class="bi bi-arrow-left"></i> Sebelumnya
                    </button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                        Selanjutnya <i class="bi bi-arrow-right"></i>
                    </button>
                    <button class="btn btn-success" id="completeBtn" onclick="completeMaterial()" style="display: none;">
                        <i class="bi bi-check-circle"></i> Selesai Belajar!
                    </button>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section id="quizSection" class="material-section">
            <div class="container">
                <div class="learning-card">
                    <div id="quizContent">
                        <!-- Quiz content will be loaded here -->
                    </div>
                </div>
                
                <!-- Quiz Navigation -->
                <div class="navigation-buttons">
                    <button class="btn btn-primary" id="submitQuizBtn" onclick="submitQuiz()">
                        <i class="bi bi-check-circle"></i> Periksa Jawaban
                    </button>
                </div>
            </div>
        </section>

        <!-- Completion Screen -->
        <section id="completionScreen" class="material-section">
            <div class="container text-center">
                <div class="completion-card">
                    <div class="completion-icon">
                        <i class="bi bi-trophy-fill"></i>
                    </div>
                    <h2>Selamat!</h2>
                    <p id="completionMessage">Kamu telah menyelesaikan materi!</p>
                    
                    <!-- Next Level Unlocked Message -->
                    <div class="alert alert-success" id="nextLevelUnlocked" style="display: none;">
                        <i class="bi bi-unlock-fill"></i>
                        <strong>Level <span id="nextLevelNumber"></span> terbuka!</strong>
                        Kamu bisa melanjutkan ke level berikutnya.
                    </div>
                    
                    <div class="reward-info">
                        <div class="reward-item">
                            <i class="bi bi-star-fill"></i>
                            <span id="pointsEarned">+0 Poin</span>
                        </div>
                        <div class="reward-item">
                            <i class="bi bi-graph-up"></i>
                            <span>Progress Bertambah</span>
                        </div>
                    </div>
                    <div class="completion-actions">
                        <button class="btn btn-primary" id="continueNextLevelBtn" onclick="continueToNextLevel()" style="display: none;">
                            <i class="bi bi-arrow-right-circle"></i> Lanjut ke Level Berikutnya
                        </button>
                        <button class="btn btn-outline-primary" onclick="selectNewMaterial()">
                            <i class="bi bi-grid"></i> Pelajari Materi Lain
                        </button>
                        <button class="btn btn-outline-secondary" onclick="goBackToDashboard()">
                            <i class="bi bi-house"></i> Kembali ke Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Audio Elements -->
    <audio id="correctSound" src="../music/correct.mp3" preload="auto"></audio>
    <audio id="completionSound" src="../music/completion.mp3" preload="auto"></audio>
    <audio id="clickSound" src="../music/click.mp3" preload="auto"></audio>

    <script type="module" src="../js/learning-materials.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>