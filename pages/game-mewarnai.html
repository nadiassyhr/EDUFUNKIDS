<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Mewarnai - EduFunKids</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../css/game-mewarnai.css">
</head>
<body>
    <!-- Audio element untuk backsound dan efek suara -->
    <audio id="gameBackgroundMusic" loop>
        <source src="../music/game.mp3" type="audio/mpeg">
        Browser Anda tidak mendukung elemen audio.
    </audio>
    <audio id="clickSound">
        <source src="../music/click.mp3" type="audio/mpeg">
    </audio>
    <audio id="correctSound">
        <source src="../music/correct.mp3" type="audio/mpeg">
    </audio>
    <audio id="completionSound">
        <source src="../music/yeay-childrens.mp3" type="audio/mpeg">
    </audio>
    <audio id="clappingSound">
        <source src="../music/clapping-2.mp3" type="audio/mpeg">
    </audio>

    <div class="game-container">
        <!-- Game Header -->
        <div class="game-header">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-auto">
                        <button class="btn btn-back" onclick="exitGame()">
                            <i class="bi bi-arrow-left"></i>
                        </button>
                    </div>
                    <div class="col text-center">
                        <h2>Mewarnai Seru</h2>
                        <div class="level-info">Level <span id="currentLevel">1</span></div>
                    </div>
                    <div class="col-auto">
                        <div class="timer-display">
                            <i class="bi bi-clock"></i>
                            <span id="timer">300</span>s
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Content -->
        <div class="game-content">
            <div class="container-fluid">
                <div class="row">
                    <!-- Tools Section -->
                    <div class="col-md-3">
                        <div class="tools-panel">
                            <h5 class="text-center mb-3">Alat Mewarnai</h5>
                            
                            <!-- Color Picker -->
                            <div class="tool-section">
                                <h6>Pilih Warna</h6>
                                <div class="color-palette" id="colorPalette">
                                    <!-- Colors will be generated dynamically -->
                                </div>
                            </div>

                            <!-- Brush Size -->
                            <div class="tool-section">
                                <h6>Ukuran Kuas</h6>
                                <div class="brush-sizes">
                                    <button class="brush-btn active" data-size="5">Kecil</button>
                                    <button class="brush-btn" data-size="10">Sedang</button>
                                    <button class="brush-btn" data-size="20">Besar</button>
                                </div>
                            </div>

                            <!-- Tools -->
                            <div class="tool-section">
                                <h6>Alat</h6>
                                <div class="tools">
                                    <button class="tool-btn active" data-tool="brush">
                                        <i class="bi bi-brush"></i>
                                        Kuas
                                    </button>
                                    <button class="tool-btn" data-tool="eraser">
                                        <i class="bi bi-eraser"></i>
                                        Penghapus
                                    </button>
                                    <button class="tool-btn" data-tool="fill">
                                        <i class="bi bi-bucket"></i>
                                        Isi
                                    </button>
                                </div>
                            </div>

                            <!-- Actions -->
                            <div class="tool-section">
                                <h6>Aksi</h6>
                                <div class="actions">
                                    <button class="action-btn" id="undoBtn" disabled>
                                        <i class="bi bi-arrow-counterclockwise"></i>
                                        Undo
                                    </button>
                                    <button class="action-btn" id="clearBtn">
                                        <i class="bi bi-x-circle"></i>
                                        Bersihkan
                                    </button>
                                    <button class="action-btn" id="hintBtn">
                                        <i class="bi bi-lightbulb"></i>
                                        Petunjuk
                                    </button>
                                </div>
                            </div>

                            <!-- Current Color Display -->
                            <div class="current-color-section">
                                <h6>Warna Saat Ini</h6>
                                <div class="current-color-display">
                                    <div class="current-color" id="currentColor"></div>
                                    <span id="currentColorName">Merah</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Canvas Section -->
                    <div class="col-md-6">
                        <div class="canvas-container">
                            <div class="drawing-area">
                                <canvas id="drawingCanvas" width="600" height="500"></canvas>
                                <div class="reference-image" id="referenceImage">
                                    <img src="" alt="Gambar referensi" id="refImage">
                                </div>
                            </div>
                            
                            <!-- Drawing Info -->
                            <div class="drawing-info text-center mt-3">
                                <h5 id="drawingTitle">Judul Gambar</h5>
                                <p id="drawingDescription">Deskripsi gambar yang harus diwarnai</p>
                            </div>
                        </div>
                    </div>

                    <!-- Progress & Controls -->
                    <div class="col-md-3">
                        <div class="controls-panel">
                            <!-- Progress -->
                            <div class="progress-section">
                                <h5>Progress Mewarnai</h5>
                                <div class="progress mb-2">
                                    <div class="progress-bar" id="coloringProgress" style="width: 0%"></div>
                                </div>
                                <small id="progressText">0% selesai</small>
                            </div>

                            <!-- Score -->
                            <div class="score-section">
                                <div class="score-display">
                                    <i class="bi bi-palette"></i>
                                    <span id="currentScore">0</span> Poin
                                </div>
                            </div>

                            <!-- Timer -->
                            <div class="timer-section">
                                <div class="timer-display-large">
                                    <i class="bi bi-clock"></i>
                                    <span id="timerLarge">05:00</span>
                                </div>
                            </div>

                            <!-- Controls -->
                            <div class="control-buttons">
                                <button class="btn btn-success btn-lg w-100 mb-2" id="submitBtn" disabled>
                                    <i class="bi bi-check-circle"></i>
                                    Selesai Mewarnai
                                </button>
                                <button class="btn btn-warning btn-lg w-100" id="resetBtn">
                                    <i class="bi bi-arrow-repeat"></i>
                                    Mulai Ulang
                                </button>
                            </div>

                            <!-- Color History -->
                            <div class="color-history">
                                <h6>Warna Terakhir</h6>
                                <div class="recent-colors" id="recentColors">
                                    <!-- Recent colors will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hint Modal -->
        <div class="modal fade" id="hintModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <i class="bi bi-lightbulb text-warning"></i>
                            Petunjuk Mewarnai
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div id="hintContent">
                            <!-- Hint content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result Modal - SAMA SEPERTI GAME TEBAK HURUF DENGAN PREVIEW GAMBAR -->
        <div class="modal fade" id="resultModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <!-- Konten akan di-generate oleh JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="../js/game-mewarnai.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>